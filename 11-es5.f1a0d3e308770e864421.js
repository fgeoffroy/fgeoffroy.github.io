!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ekgB:function(o,e,i){"use strict";i.r(e),i.d(e,"GamePageModule",(function(){return C}));var s=i("ofXK"),r=i("3Pt+"),c=i("TEn/"),b=i("tyNb"),l=i("fXoL"),u=i("suC+"),a=i("K1R0");function h(n,t){if(1&n&&l.Kb(0,"ion-icon",16),2&n){var o=l.Zb().$implicit;l.dc("color",o)}}function g(n,t){if(1&n&&l.Kb(0,"ion-icon",17),2&n){var o=l.Zb().$implicit;l.dc("color",o)}}function p(n,t){if(1&n&&(l.Ob(0,"ion-col",13),l.jc(1,h,1,1,"ion-icon",14),l.jc(2,g,1,1,"ion-icon",15),l.Nb()),2&n){var o=t.index,e=l.Zb();l.yb(1),l.cc("ngIf",o+1==e.currentQuestionNb),l.yb(1),l.cc("ngIf",o+1!=e.currentQuestionNb)}}var d,f,O,y=((d=function(){function o(t,e){n(this,o),this.localDb=t,this.router=e,this.currentQuestionNb=0,this.score=0,this.nbRightAnswer=0,this.nbQuestionQuiz=10,this.nbOptions=4,this.nbSentences=4,this.nbClues=0,this.isAnswered=!1,this.questionIndices=[],this.alreadyChosen=[],this.buttonColor="purpleC",this.buttonColorSuccess="success",this.buttonColorFailure="danger",this.colorButtons=Array(this.nbOptions).fill(this.buttonColor),this.question=new w(this.nbSentences),this.progressBar=Array(10).fill("greyC")}var e,i,s;return e=o,(i=[{key:"ngOnInit",value:function(){this.questionIndices=this.localDb.get_questionIndices(),this.localDb.nbQuestionQuiz=this.nbQuestionQuiz,this.currentQuestionNb=0,this.get_question()}},{key:"get_question",value:function(){var n=this;this.currentQuestionNb++,this.progressBar[this.currentQuestionNb-1]="purpleC",this.nbClues=0,this.question=new w(this.nbSentences);for(var t=[];t.length<this.nbOptions;){var o=this.questionIndices[Math.floor(Math.random()*this.questionIndices.length)];-1==t.indexOf(o)&&-1==this.alreadyChosen.indexOf(o)&&(t.push(o),this.alreadyChosen.push(o))}var e=Math.floor(Math.random()*this.nbOptions);this.question.answerInd=e,this.localDb.get_lyrics(t[e].toString()).then((function(t){n.question.lyrics=t,n.question.sentences[0]=t[0]}));for(var i=0,s=t;i<s.length;i++){var r=s[i];this.localDb.get_title(r.toString()).then((function(t){n.question.answers.push(t)}))}}},{key:"next_sentence",value:function(){this.nbClues++,this.question.sentences[this.nbClues]=this.question.lyrics[this.nbClues]}},{key:"send_answer",value:function(n){this.isAnswered||(this.isAnswered=!0,n==this.question.answerInd?(this.score+=10-1*this.nbClues,this.nbRightAnswer++,this.colorButtons[n]=this.buttonColorSuccess):(this.colorButtons[n]=this.buttonColorFailure,this.colorButtons[this.question.answerInd]=this.buttonColorSuccess)),this.question.sentences=this.question.lyrics}},{key:"next_question",value:function(){this.currentQuestionNb==this.nbQuestionQuiz?(this.localDb.score=this.score,this.localDb.nbRightAnswer=this.nbRightAnswer,this.router.navigate(["/score"])):(this.isAnswered=!1,this.colorButtons=Array(this.nbOptions).fill(this.buttonColor),this.get_question())}},{key:"getColor",value:function(n){return this.colorButtons[n]}},{key:"get_relative_score",value:function(){return 100*this.score/100}}])&&t(e.prototype,i),s&&t(e,s),o}()).\u0275fac=function(n){return new(n||d)(l.Jb(u.a),l.Jb(b.g))},d.\u0275cmp=l.Db({type:d,selectors:[["app-game"]],decls:54,vars:22,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"ion-grid-progressBar"],["size","0","class","ion-col-progressBar",4,"ngFor","ngForOf"],["text-wrap","",1,"ion-align-items-center"],["expand","block",3,"color","click"],["color","darkGreenC",3,"click"],["name","bulb","size","large"],["color","purpleC","color","darkGreenC",3,"click"],[3,"percent","title"],["size","0",1,"ion-col-progressBar"],["name","play-circle",3,"color",4,"ngIf"],["name","ellipse",3,"color",4,"ngIf"],["name","play-circle",3,"color"],["name","ellipse",3,"color"]],template:function(n,t){1&n&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-title"),l.kc(3,"Traductions foireuses"),l.Nb(),l.Nb(),l.Nb(),l.Ob(4,"ion-content",1),l.Ob(5,"ion-header",2),l.Ob(6,"ion-toolbar"),l.Ob(7,"ion-title",3),l.kc(8,"Traductions foireuses"),l.Nb(),l.Nb(),l.Nb(),l.Ob(9,"ion-content",1),l.Ob(10,"div",4),l.Ob(11,"ion-grid"),l.Ob(12,"ion-row",5),l.jc(13,p,3,2,"ion-col",6),l.Nb(),l.Nb(),l.Ob(14,"ion-card"),l.Ob(15,"ion-card-content"),l.Ob(16,"ion-grid",7),l.Ob(17,"ion-row"),l.Ob(18,"ion-col"),l.kc(19),l.Nb(),l.Nb(),l.Ob(20,"ion-row"),l.Ob(21,"ion-col"),l.kc(22),l.Nb(),l.Nb(),l.Ob(23,"ion-row"),l.Ob(24,"ion-col"),l.kc(25),l.Nb(),l.Nb(),l.Ob(26,"ion-row"),l.Ob(27,"ion-col"),l.kc(28),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(29,"ion-grid",7),l.Ob(30,"ion-row"),l.Ob(31,"ion-col"),l.Ob(32,"ion-button",8),l.Wb("click",(function(){return t.send_answer(0)})),l.kc(33),l.Nb(),l.Nb(),l.Nb(),l.Ob(34,"ion-row"),l.Ob(35,"ion-col"),l.Ob(36,"ion-button",8),l.Wb("click",(function(){return t.send_answer(1)})),l.kc(37),l.Nb(),l.Nb(),l.Nb(),l.Ob(38,"ion-row"),l.Ob(39,"ion-col"),l.Ob(40,"ion-button",8),l.Wb("click",(function(){return t.send_answer(2)})),l.kc(41),l.Nb(),l.Nb(),l.Nb(),l.Ob(42,"ion-row"),l.Ob(43,"ion-col"),l.Ob(44,"ion-button",8),l.Wb("click",(function(){return t.send_answer(3)})),l.kc(45),l.Nb(),l.Nb(),l.Nb(),l.Ob(46,"ion-row"),l.Ob(47,"ion-col"),l.Ob(48,"ion-button",9),l.Wb("click",(function(){return t.next_sentence()})),l.Kb(49,"ion-icon",10),l.Nb(),l.Nb(),l.Ob(50,"ion-col"),l.Ob(51,"ion-button",11),l.Wb("click",(function(){return t.next_question()})),l.kc(52,"Suivant"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Kb(53,"circle-progress",12),l.Nb(),l.Nb(),l.Nb()),2&n&&(l.cc("translucent",!0),l.yb(4),l.cc("fullscreen",!0),l.yb(5),l.cc("fullscreen",!0),l.yb(4),l.cc("ngForOf",t.progressBar),l.yb(6),l.mc(" ",t.question.sentences[0]," "),l.yb(3),l.mc(" ",t.question.sentences[1]," "),l.yb(3),l.mc(" ",t.question.sentences[2]," "),l.yb(3),l.mc(" ",t.question.sentences[3]," "),l.yb(4),l.cc("color",t.getColor(0)),l.yb(1),l.lc(t.question.answers[0]),l.yb(3),l.cc("color",t.getColor(1)),l.yb(1),l.lc(t.question.answers[1]),l.yb(3),l.cc("color",t.getColor(2)),l.yb(1),l.lc(t.question.answers[2]),l.yb(3),l.cc("color",t.getColor(3)),l.yb(1),l.lc(t.question.answers[3]),l.yb(3),l.Bb("button-disabled",t.isAnswered||t.nbClues>=t.nbSentences-1),l.yb(3),l.Bb("button-disabled",!t.isAnswered),l.yb(2),l.cc("percent",t.get_relative_score())("title",t.score))},directives:[c.h,c.q,c.p,c.f,c.g,c.m,s.h,c.c,c.d,c.e,c.b,c.i,a.a,s.i],styles:["ion-card[_ngcontent-%COMP%]{background-color:var(--ion-color-greyC);margin-top:0!important;padding-top:0!important}.ion-grid-progressBar[_ngcontent-%COMP%]{margin:0!important;padding:0!important;justify-content:center!important}.ion-col-progressBar[_ngcontent-%COMP%]{margin-left:10px!important;margin-bottom:0!important}ion-card-content[_ngcontent-%COMP%]{margin-top:0!important;padding-top:0!important;padding-bottom:0!important}#container[_ngcontent-%COMP%]{text-align:center;position:relative;left:0;right:0}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),d),w=function t(o){n(this,t),this.lyrics=[],this.answers=new Array,this.answerInd=0,this.sentences=Array(o).fill("_ _ _")},N=[{path:"",component:y}],m=((O=function t(){n(this,t)}).\u0275mod=l.Hb({type:O}),O.\u0275inj=l.Gb({factory:function(n){return new(n||O)},imports:[[b.i.forChild(N)],b.i]}),O),C=((f=function t(){n(this,t)}).\u0275mod=l.Hb({type:f}),f.\u0275inj=l.Gb({factory:function(n){return new(n||f)},imports:[[s.b,r.a,c.r,m,a.b]]}),f)}}])}();