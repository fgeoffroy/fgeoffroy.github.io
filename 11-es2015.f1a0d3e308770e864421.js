(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ekgB:function(n,t,o){"use strict";o.r(t),o.d(t,"GamePageModule",(function(){return f}));var e=o("ofXK"),i=o("3Pt+"),s=o("TEn/"),r=o("tyNb"),c=o("fXoL"),b=o("suC+"),l=o("K1R0");function u(n,t){if(1&n&&c.Kb(0,"ion-icon",16),2&n){const n=c.Zb().$implicit;c.dc("color",n)}}function a(n,t){if(1&n&&c.Kb(0,"ion-icon",17),2&n){const n=c.Zb().$implicit;c.dc("color",n)}}function h(n,t){if(1&n&&(c.Ob(0,"ion-col",13),c.jc(1,u,1,1,"ion-icon",14),c.jc(2,a,1,1,"ion-icon",15),c.Nb()),2&n){const n=t.index,o=c.Zb();c.yb(1),c.cc("ngIf",n+1==o.currentQuestionNb),c.yb(1),c.cc("ngIf",n+1!=o.currentQuestionNb)}}let g=(()=>{class n{constructor(n,t){this.localDb=n,this.router=t,this.currentQuestionNb=0,this.score=0,this.nbRightAnswer=0,this.nbQuestionQuiz=10,this.nbOptions=4,this.nbSentences=4,this.nbClues=0,this.isAnswered=!1,this.questionIndices=[],this.alreadyChosen=[],this.buttonColor="purpleC",this.buttonColorSuccess="success",this.buttonColorFailure="danger",this.colorButtons=Array(this.nbOptions).fill(this.buttonColor),this.question=new p(this.nbSentences),this.progressBar=Array(10).fill("greyC")}ngOnInit(){this.questionIndices=this.localDb.get_questionIndices(),this.localDb.nbQuestionQuiz=this.nbQuestionQuiz,this.currentQuestionNb=0,this.get_question()}get_question(){this.currentQuestionNb++,this.progressBar[this.currentQuestionNb-1]="purpleC",this.nbClues=0,this.question=new p(this.nbSentences);let n=[];for(;n.length<this.nbOptions;){let t=this.questionIndices[Math.floor(Math.random()*this.questionIndices.length)];-1==n.indexOf(t)&&-1==this.alreadyChosen.indexOf(t)&&(n.push(t),this.alreadyChosen.push(t))}let t=Math.floor(Math.random()*this.nbOptions);this.question.answerInd=t,this.localDb.get_lyrics(n[t].toString()).then(n=>{this.question.lyrics=n,this.question.sentences[0]=n[0]});for(const o of n)this.localDb.get_title(o.toString()).then(n=>{this.question.answers.push(n)})}next_sentence(){this.nbClues++,this.question.sentences[this.nbClues]=this.question.lyrics[this.nbClues]}send_answer(n){this.isAnswered||(this.isAnswered=!0,n==this.question.answerInd?(this.score+=10-1*this.nbClues,this.nbRightAnswer++,this.colorButtons[n]=this.buttonColorSuccess):(this.colorButtons[n]=this.buttonColorFailure,this.colorButtons[this.question.answerInd]=this.buttonColorSuccess)),this.question.sentences=this.question.lyrics}next_question(){this.currentQuestionNb==this.nbQuestionQuiz?(this.localDb.score=this.score,this.localDb.nbRightAnswer=this.nbRightAnswer,this.router.navigate(["/score"])):(this.isAnswered=!1,this.colorButtons=Array(this.nbOptions).fill(this.buttonColor),this.get_question())}getColor(n){return this.colorButtons[n]}get_relative_score(){return 100*this.score/100}}return n.\u0275fac=function(t){return new(t||n)(c.Jb(b.a),c.Jb(r.g))},n.\u0275cmp=c.Db({type:n,selectors:[["app-game"]],decls:54,vars:22,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"ion-grid-progressBar"],["size","0","class","ion-col-progressBar",4,"ngFor","ngForOf"],["text-wrap","",1,"ion-align-items-center"],["expand","block",3,"color","click"],["color","darkGreenC",3,"click"],["name","bulb","size","large"],["color","purpleC","color","darkGreenC",3,"click"],[3,"percent","title"],["size","0",1,"ion-col-progressBar"],["name","play-circle",3,"color",4,"ngIf"],["name","ellipse",3,"color",4,"ngIf"],["name","play-circle",3,"color"],["name","ellipse",3,"color"]],template:function(n,t){1&n&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-title"),c.kc(3,"Traductions foireuses"),c.Nb(),c.Nb(),c.Nb(),c.Ob(4,"ion-content",1),c.Ob(5,"ion-header",2),c.Ob(6,"ion-toolbar"),c.Ob(7,"ion-title",3),c.kc(8,"Traductions foireuses"),c.Nb(),c.Nb(),c.Nb(),c.Ob(9,"ion-content",1),c.Ob(10,"div",4),c.Ob(11,"ion-grid"),c.Ob(12,"ion-row",5),c.jc(13,h,3,2,"ion-col",6),c.Nb(),c.Nb(),c.Ob(14,"ion-card"),c.Ob(15,"ion-card-content"),c.Ob(16,"ion-grid",7),c.Ob(17,"ion-row"),c.Ob(18,"ion-col"),c.kc(19),c.Nb(),c.Nb(),c.Ob(20,"ion-row"),c.Ob(21,"ion-col"),c.kc(22),c.Nb(),c.Nb(),c.Ob(23,"ion-row"),c.Ob(24,"ion-col"),c.kc(25),c.Nb(),c.Nb(),c.Ob(26,"ion-row"),c.Ob(27,"ion-col"),c.kc(28),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(29,"ion-grid",7),c.Ob(30,"ion-row"),c.Ob(31,"ion-col"),c.Ob(32,"ion-button",8),c.Wb("click",(function(){return t.send_answer(0)})),c.kc(33),c.Nb(),c.Nb(),c.Nb(),c.Ob(34,"ion-row"),c.Ob(35,"ion-col"),c.Ob(36,"ion-button",8),c.Wb("click",(function(){return t.send_answer(1)})),c.kc(37),c.Nb(),c.Nb(),c.Nb(),c.Ob(38,"ion-row"),c.Ob(39,"ion-col"),c.Ob(40,"ion-button",8),c.Wb("click",(function(){return t.send_answer(2)})),c.kc(41),c.Nb(),c.Nb(),c.Nb(),c.Ob(42,"ion-row"),c.Ob(43,"ion-col"),c.Ob(44,"ion-button",8),c.Wb("click",(function(){return t.send_answer(3)})),c.kc(45),c.Nb(),c.Nb(),c.Nb(),c.Ob(46,"ion-row"),c.Ob(47,"ion-col"),c.Ob(48,"ion-button",9),c.Wb("click",(function(){return t.next_sentence()})),c.Kb(49,"ion-icon",10),c.Nb(),c.Nb(),c.Ob(50,"ion-col"),c.Ob(51,"ion-button",11),c.Wb("click",(function(){return t.next_question()})),c.kc(52,"Suivant"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Kb(53,"circle-progress",12),c.Nb(),c.Nb(),c.Nb()),2&n&&(c.cc("translucent",!0),c.yb(4),c.cc("fullscreen",!0),c.yb(5),c.cc("fullscreen",!0),c.yb(4),c.cc("ngForOf",t.progressBar),c.yb(6),c.mc(" ",t.question.sentences[0]," "),c.yb(3),c.mc(" ",t.question.sentences[1]," "),c.yb(3),c.mc(" ",t.question.sentences[2]," "),c.yb(3),c.mc(" ",t.question.sentences[3]," "),c.yb(4),c.cc("color",t.getColor(0)),c.yb(1),c.lc(t.question.answers[0]),c.yb(3),c.cc("color",t.getColor(1)),c.yb(1),c.lc(t.question.answers[1]),c.yb(3),c.cc("color",t.getColor(2)),c.yb(1),c.lc(t.question.answers[2]),c.yb(3),c.cc("color",t.getColor(3)),c.yb(1),c.lc(t.question.answers[3]),c.yb(3),c.Bb("button-disabled",t.isAnswered||t.nbClues>=t.nbSentences-1),c.yb(3),c.Bb("button-disabled",!t.isAnswered),c.yb(2),c.cc("percent",t.get_relative_score())("title",t.score))},directives:[s.h,s.q,s.p,s.f,s.g,s.m,e.h,s.c,s.d,s.e,s.b,s.i,l.a,e.i],styles:["ion-card[_ngcontent-%COMP%]{background-color:var(--ion-color-greyC);margin-top:0!important;padding-top:0!important}.ion-grid-progressBar[_ngcontent-%COMP%]{margin:0!important;padding:0!important;justify-content:center!important}.ion-col-progressBar[_ngcontent-%COMP%]{margin-left:10px!important;margin-bottom:0!important}ion-card-content[_ngcontent-%COMP%]{margin-top:0!important;padding-top:0!important;padding-bottom:0!important}#container[_ngcontent-%COMP%]{text-align:center;position:relative;left:0;right:0}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),n})();class p{constructor(n){this.lyrics=[],this.answers=new Array,this.answerInd=0,this.sentences=Array(n).fill("_ _ _")}}const d=[{path:"",component:g}];let O=(()=>{class n{}return n.\u0275mod=c.Hb({type:n}),n.\u0275inj=c.Gb({factory:function(t){return new(t||n)},imports:[[r.i.forChild(d)],r.i]}),n})(),f=(()=>{class n{}return n.\u0275mod=c.Hb({type:n}),n.\u0275inj=c.Gb({factory:function(t){return new(t||n)},imports:[[e.b,i.a,s.r,O,l.b]]}),n})()}}]);